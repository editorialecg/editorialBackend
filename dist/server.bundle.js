(()=>{"use strict";var r={201:(r,e,n)=>{n.r(e),n.d(e,{default:()=>t});const t=(0,n(619).connect)("mongodb+srv://".concat(process.env.MONGODB_USER,":").concat(process.env.MONGODB_PASSWORD,"@cluster0.nkdgo.mongodb.net/").concat(process.env.MONGODB_DB,"?retryWrites=true&w=majority"),{useNewUrlParser:!0,useUnifiedTopology:!0,useFindAndModify:!1,useCreateIndex:!0}).then((function(){return console.log("DataBase Connected")}),(function(r){return console.log("DataBase Error ",r)}))},334:r=>{r.exports=require("dotenv")},619:r=>{r.exports=require("mongoose")}},e={};function n(t){var u=e[t];if(void 0!==u)return u.exports;var a=e[t]={exports:{}};return r[t](a,a.exports,n),a.exports}n.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return n.d(e,{a:e}),e},n.d=(r,e)=>{for(var t in e)n.o(e,t)&&!n.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},n.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),n.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},(()=>{const r=require("express");var e=n.n(r);const t=require("morgan");var u=n.n(t);const a=require("cors");var i=n.n(a);const s=require("compression");var o=n.n(s);const c=require("helmet");var p=n.n(c);const f=require("express-graphql"),l=(0,require("graphql").buildSchema)("\n\n    type Query{\n        oneUser(username: String!): User!\n        oneEbook(title: String!): Ebook!\n        oneEbookPages(username: String! title: String!): Ebook!\n        allEbook: [Ebook!]!\n        myEbooks(username: String!): User!\n    }\n\n    type Mutation{\n        login(username: String! password: String!): User!\n        createUser(name: String! lastname: String! email: String! username: String! password: String! country: String! birthDay: String! birthMonth: String! birthYear: String!): User!\n        \n        confirmCode(username: String! code: String!): User!\n        confirmPassword(username: String! password: String!): User!\n        confirmUser(username: String!): User!\n\n        changePassword(username: String! password: String!): User!\n        updateUser(\n            oldUsername: String! newUsername: String name: String lastname: String email: String\n        ): User\n\n\n        createEbook(\n            title: String! subTitle: String path: String! content: [String!] pages: String! published: String!\n            language: String! author: String! authorBio: String copyReader: String!\n            copyReaderBio: String illustrator: String! \n            illustratorBio: String edition: String! gender: String!\n            description: String! btnPayPal: String! legalDepo: String!\n            isbn: String! editor: String! editorBio: String price: String!\n        ): Ebook!\n\n\n        ebookPayed(username: String! title: String!): User!\n        updateEbookSelled(title: String!): Ebook!\n    }\n\n    type Ebook{\n        title: String!\n        subTitle: String\n        path: String!\n        pages: String!\n        content: [String]\n        published: String!\n        language: String!\n        author: String!\n        authorBio: String!\n        copyReader: String!\n        copyReaderBio: String!\n        illustrator: String!\n        illustratorBio: String!\n        editor: String!\n        editorBio: String!\n        edition: String!\n        gender: String!\n        description: String!\n        btnPayPal: String!\n        legalDepo: String!\n        isbn: String!\n        price: String!\n        selled: String\n    }\n\n    type User{\n        name: String!\n        lastname: String!\n        email: String!\n        verifyEmail: Boolean!\n        codeVerify: String!\n        username: String!\n        country: String!\n        birthDay: String!\n        birthMonth: String!\n        birthYear: String!\n        ebookAccess: [String]\n        \n    }\n\n    \n\n"),d=require("@babel/runtime/helpers/asyncToGenerator");var g=n.n(d);const b=require("@babel/runtime/regenerator");var h=n.n(b),m=n(619),y={timestamps:{currentTime:function(){return Math.floor(Date.now())}}},S=(0,m.Schema)({name:{type:String,require:!0,default:""},lastname:{type:String,require:!0,default:""},email:{type:String,require:!0,default:""},verifyEmail:{type:Boolean},codeVerify:{type:String,default:""},username:{type:String,require:!0,default:""},password:{type:String,require:!0,default:""},country:{type:String,require:!0,default:""},birthDay:{type:String,require:!0,default:""},birthMonth:{type:String,require:!0,default:""},birthYear:{type:String,require:!0,default:""},ebookAccess:{type:Array,default:[]}},y);const w=(0,m.model)("signin",S);function x(r){return k.apply(this,arguments)}function k(){return(k=g()(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){return w.findOne({username:e},(function(e,t){if(e)return n(e);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function v(r){return q.apply(this,arguments)}function q(){return(q=g()(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){return w.findOne({email:e},(function(e,t){if(e)return n(e);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function U(r,e,n,t,u,a,i,s,o,c,p){return E.apply(this,arguments)}function E(){return(E=g()(h().mark((function r(e,n,t,u,a,i,s,o,c,p,f){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,l){return w.create({name:e,lastname:n,email:t,verifyEmail:u,codeVerify:a,username:i,password:s,country:o,birthDay:c,birthMonth:p,birthYear:f},(function(e,n){if(e)return l(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function P(r,e){return B.apply(this,arguments)}function B(){return(B=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,t){return w.findOneAndUpdate({username:e},{verifyEmail:n},{new:!0},(function(e,n){if(e)return t(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function D(r,e){return O.apply(this,arguments)}function O(){return(O=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,t){return w.findOneAndUpdate({username:e},{password:n},{new:!0},(function(e,n){if(e)return t(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function T(r,e){return M.apply(this,arguments)}function M(){return(M=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,t){return w.findOneAndUpdate({username:e},n,{new:!0},(function(e,n){if(e)return t(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function A(r,e){return R.apply(this,arguments)}function R(){return(R=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,t){return w.findOneAndUpdate({username:e},n,{new:!0},(function(e,n){if(e)return t(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function j(r){return I.apply(this,arguments)}function I(){return(I=g()(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function _(r){return N.apply(this,arguments)}function N(){return(N=g()(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function V(r,e,n,t,u,a,i,s,o,c,p){return C.apply(this,arguments)}function C(){return(C=g()(h().mark((function r(e,n,t,u,a,i,s,o,c,p,f){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,U(e,n,t,u,a,i,s,o,c,p,f);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function G(r,e){return L.apply(this,arguments)}function L(){return(L=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P(e,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function Y(r,e){return W.apply(this,arguments)}function W(){return(W=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,D(e,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function z(r,e){return F.apply(this,arguments)}function F(){return(F=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T(e,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function H(r,e){return Q.apply(this,arguments)}function Q(){return(Q=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A(e,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var J={timestamps:{currentTime:function(){return Math.floor(Date.now())}}},K=(0,m.Schema)({title:{type:String,require:!0},subTitle:{type:String},path:{type:String,require:!0},pages:{type:String,require:!0},content:{type:[String]},published:{type:String,require:!0},language:{type:String,require:!0},author:{type:String,require:!0},authorBio:{type:String,require:!0},copyReader:{type:String,require:!0},copyReaderBio:{type:String,require:!0},illustrator:{type:String,require:!0},illustratorBio:{type:String,require:!0},editor:{type:String,require:!0},editorBio:{type:String,require:!0},edition:{type:String,require:!0},gender:{type:String,require:!0},description:{type:String,require:!0},btnPayPal:{type:String,require:!0},legalDepo:{type:String,require:!0},isbn:{type:String,require:!0},price:{type:String,require:!0},selled:{type:Number,default:0}},J);const X=(0,m.model)("ebookfronts",K);function Z(){return $.apply(this,arguments)}function $(){return($=g()(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){return X.find({},(function(n,t){if(n)return e(n);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function rr(r){return er.apply(this,arguments)}function er(){return(er=g()(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){return X.findOne({title:e},(function(e,t){if(e)return n(e);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function nr(r,e){return tr.apply(this,arguments)}function tr(){return(tr=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,t){return X.findOneAndUpdate({title:e},{selled:n},{new:!0},(function(e,n){if(e)return t(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function ur(r,e,n,t,u,a,i,s,o,c,p,f,l,d,g,b,h,m,y,S,w,x){return ar.apply(this,arguments)}function ar(){return(ar=g()(h().mark((function r(e,n,t,u,a,i,s,o,c,p,f,l,d,g,b,m,y,S,w,x,k,v){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,h){return X.create({title:e,subTitle:n,path:t,content:u,pages:a,published:i,language:s,author:o,authorBio:c,copyReader:p,copyReaderBio:f,illustrator:l,illustratorBio:d,edition:g,gender:b,description:m,btnPayPal:y,legalDepo:S,isbn:w,editor:x,editorBio:k,price:v},(function(e,n){if(e)return h(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function ir(){return sr.apply(this,arguments)}function sr(){return(sr=g()(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Z();case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function or(r){return cr.apply(this,arguments)}function cr(){return(cr=g()(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,rr(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function pr(r,e){return fr.apply(this,arguments)}function fr(){return(fr=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,nr(e,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function lr(r,e,n,t,u,a,i,s,o,c,p,f,l,d,g,b,h,m,y,S,w,x){return dr.apply(this,arguments)}function dr(){return(dr=g()(h().mark((function r(e,n,t,u,a,i,s,o,c,p,f,l,d,g,b,m,y,S,w,x,k,v){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ur(e,n,t,u,a,i,s,o,c,p,f,l,d,g,b,m,y,S,w,x,k,v);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}const gr=require("bcrypt"),br=(require("jsonwebtoken"),require("nodemailer"));function hr(r,e){return mr.apply(this,arguments)}function mr(){return(mr=g()(h().mark((function r(e,n){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,gr.compareSync)(e,n));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function yr(r){return Sr.apply(this,arguments)}function Sr(){return(Sr=g()(h().mark((function r(e){var n,t;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=(0,gr.genSaltSync)(10),t=(0,gr.hashSync)(e,n),r.abrupt("return",t);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function wr(r,e){return xr.apply(this,arguments)}function xr(){return(xr=g()(h().mark((function r(e,n){var t,u;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:process.env.EDITORIALUSER,t=process.env.EDITORIALEMAIL,u=process.env.EDITORIAL_PWD,(0,br.createTransport)({host:"smtp.editorialgrande.com",port:587,secure:!1,requireTLS:!0,tls:{rejectUnauthorized:!1},auth:{user:t,pass:u}}).sendMail({from:"Soporte de Escribe como los Grandes ".concat(t),to:e,subject:"Codigo de verificación",text:"Tu codigo de verificación es: "+n},(function(r,e){if(!r)return e;console.log(r)}));case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function kr(){return vr.apply(this,arguments)}function vr(){return(vr=g()(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Math.random().toString(36).substr(2));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}const qr={oneUser:(Vr=g()(h().mark((function r(e,n,t){var u;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.username){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,j(u);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)}))),function(r,e,n){return Vr.apply(this,arguments)}),oneEbook:(Nr=g()(h().mark((function r(e,n,t){var u,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.Ebook,u=e.title){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,or(u);case 6:return a=r.sent,r.abrupt("return",a);case 8:case"end":return r.stop()}}),r)}))),function(r,e,n){return Nr.apply(this,arguments)}),oneEbookPages:(_r=g()(h().mark((function r(e,n,t){var u,a,i,s,o;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.Ebook,u=e.username,a=e.title,r.next=4,j(u);case 4:return i=r.sent,r.next=7,or(a);case 7:s=r.sent,o=0;case 9:if(!(o<i.ebookAccess.length)){r.next=16;break}if(i.ebookAccess[o]!=s.title){r.next=13;break}return r.abrupt("return",s);case 13:o++,r.next=9;break;case 16:case"end":return r.stop()}}),r)}))),function(r,e,n){return _r.apply(this,arguments)}),allEbook:(Ir=g()(h().mark((function r(e,n,t){var u;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.Ebook,r.next=3,ir();case 3:return u=r.sent,r.abrupt("return",u);case 5:case"end":return r.stop()}}),r)}))),function(r,e,n){return Ir.apply(this,arguments)}),myEbooks:(jr=g()(h().mark((function r(e,n,t){var u,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.Ebook,u=e.username,r.next=4,j(u);case 4:return a=r.sent,r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)}))),function(r,e,n){return jr.apply(this,arguments)}),login:(Rr=g()(h().mark((function r(e,n,t){var u,a,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.username,a=e.password,u&&a){r.next=4;break}throw new Error({code:400,message:"Username or Password empty"});case 4:return r.next=6,j(u);case 6:if(i=r.sent){r.next=9;break}throw new Error({code:403,message:"User not exist"});case 9:return r.next=11,hr(a,i.password);case 11:if(!r.sent){r.next=15;break}return r.abrupt("return",i);case 15:throw new Error({code:401,message:"Unauthorized"});case 16:case"end":return r.stop()}}),r)}))),function(r,e,n){return Rr.apply(this,arguments)}),createUser:(Ar=g()(h().mark((function r(e,n,t){var u,a,i,s,o,c,p,f,l,d,g,b,m,y;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.name,a=e.lastname,i=e.username,s=e.email,o=e.password,c=e.country,p=e.birthDay,f=e.birthMonth,l=e.birthYear,u&&a&&i&&s&&o&&c&&p&&f&&l){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,j(i);case 6:return d=r.sent,r.next=9,_(s);case 9:if(g=r.sent,!d&&!g){r.next=12;break}return r.abrupt("return",null);case 12:return r.next=14,yr(o);case 14:return b=r.sent,r.next=17,kr();case 17:return m=r.sent,r.next=20,V(u,a,s,!1,m,i,b,c,p,f,l);case 20:return y=r.sent,r.next=23,wr(y.email,m);case 23:return r.abrupt("return",y);case 24:case"end":return r.stop()}}),r)}))),function(r,e,n){return Ar.apply(this,arguments)}),confirmCode:(Mr=g()(h().mark((function r(e,n,t){var u,a,i,s;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.username,a=e.code,u&&a){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,j(u);case 6:if(i=r.sent){r.next=9;break}return r.abrupt("return",null);case 9:if(i.codeVerify!=a){r.next=16;break}return r.next=12,G(u,!0);case 12:return s=r.sent,r.abrupt("return",s);case 16:return r.abrupt("return",null);case 17:case"end":return r.stop()}}),r)}))),function(r,e,n){return Mr.apply(this,arguments)}),confirmPassword:(Tr=g()(h().mark((function r(e,n,t){var u,a,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.username,a=e.password,u&&a){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,j(u);case 6:if(i=r.sent){r.next=9;break}return r.abrupt("return",null);case 9:return r.next=11,hr(a,i.password);case 11:if(!r.sent){r.next=13;break}return r.abrupt("return",i);case 13:return r.abrupt("return",null);case 14:case"end":return r.stop()}}),r)}))),function(r,e,n){return Tr.apply(this,arguments)}),confirmUser:(Or=g()(h().mark((function r(e,n,t){var u,a,i,s;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.username){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,j(u);case 6:if(a=r.sent){r.next=9;break}return r.abrupt("return",null);case 9:return r.next=11,kr();case 11:return i=r.sent,s=a.email,r.next=15,z(u,{codeVerify:i});case 15:return r.next=17,wr(s,i);case 17:return r.abrupt("return",a);case 18:case"end":return r.stop()}}),r)}))),function(r,e,n){return Or.apply(this,arguments)}),changePassword:(Dr=g()(h().mark((function r(e,n,t){var u,a,i,s;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.username,a=e.password,u&&a){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,j(u);case 6:if(r.sent){r.next=9;break}return r.abrupt("return",null);case 9:return r.next=11,yr(a);case 11:return i=r.sent,r.next=14,Y(u,i);case 14:if(s=r.sent){r.next=17;break}return r.abrupt("return",null);case 17:return r.abrupt("return",s);case 18:case"end":return r.stop()}}),r)}))),function(r,e,n){return Dr.apply(this,arguments)}),updateUser:(Br=g()(h().mark((function r(e,n,t){var u,a,i,s,o,c,p;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.oldUsername,a=e.newUsername,i=e.name,s=e.lastName,o=e.email,c={name:"",lastname:"",email:"",username:""},i&&(c.name=i),s&&(c.lastname=s),!o){r.next=12;break}return r.next=8,_(o);case 8:if(!r.sent){r.next=11;break}return r.abrupt("return",null);case 11:c.email=o;case 12:if(!a){r.next=17;break}if(p=j(a),a!=p.username){r.next=16;break}return r.abrupt("return",null);case 16:c.userName=a;case 17:if(""!=c.username||""!=c.name||""!=c.lastname||""!=c.email){r.next=19;break}return r.abrupt("return",null);case 19:return r.next=21,z(u,c);case 21:return r.abrupt("return",r.sent);case 22:case"end":return r.stop()}}),r)}))),function(r,e,n){return Br.apply(this,arguments)}),createEbook:(Pr=g()(h().mark((function r(e,n,t){var u,a,i,s,o,c,p,f,l,d,g,b,m,y,S,w,x,k,v,q,U,E,P;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.Ebook,u=e.title,a=e.subTitle,i=e.path,s=e.content,o=e.pages,c=e.published,p=e.language,f=e.author,l=e.authorBio,d=e.copyReader,g=e.copyReaderBio,b=e.illustrator,m=e.illustratorBio,y=e.edition,S=e.gender,w=e.description,x=e.btnPayPal,k=e.legalDepo,v=e.isbn,q=e.editor,U=e.editorBio,E=e.price,r.next=4,lr(u,a,i,s,o,c,p,f,l,d,g,b,m,y,S,w,x,k,v,q,U,E);case 4:return P=r.sent,r.abrupt("return",P);case 6:case"end":return r.stop()}}),r)}))),function(r,e,n){return Pr.apply(this,arguments)}),ebookPayed:(Er=g()(h().mark((function r(e,n,t){var u,a,i,s,o,c;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.User,u=e.username,a=e.title,u&&a){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,j(u);case 6:return i=r.sent,r.next=9,or(a);case 9:return s=r.sent,o={ebookAccess:s.title},r.next=13,H(i.username,o);case 13:return c=r.sent,r.abrupt("return",c);case 15:case"end":return r.stop()}}),r)}))),function(r,e,n){return Er.apply(this,arguments)}),updateEbookSelled:(Ur=g()(h().mark((function r(e,n,t){var u,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.Ebook,u=e.title){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,or(u);case 6:if(a=r.sent){r.next=9;break}return r.abrupt("return",null);case 9:return r.next=11,pr(u,a.selled+1);case 11:return r.abrupt("return",r.sent);case 12:case"end":return r.stop()}}),r)}))),function(r,e,n){return Ur.apply(this,arguments)})};var Ur,Er,Pr,Br,Dr,Or,Tr,Mr,Ar,Rr,jr,Ir,_r,Nr,Vr,Cr={timestamps:{currentTime:function(){return Math.floor(Date.now())}}},Gr=(0,m.Schema)({title:{type:String,require:!0},path:{type:[String],default:[]}},Cr);const Lr=(0,m.model)("ebookPdf",Gr);var Yr=e()();n(334).config(),Yr.use(u()("dev")),Yr.use((0,r.json)()),Yr.use((0,r.urlencoded)({extended:!0})),Yr.use(i()()),Yr.use(o()()),Yr.use(p()()),n(201),Yr.use("/graphql",(0,f.graphqlHTTP)({schema:l,rootValue:qr,context:{User:w,Ebook:X,EbookPages:Lr},graphiql:!0}));const Wr=Yr;Wr.set("port",process.env.PORT),Wr.listen(Wr.get("port"),(function(){console.log("Server run on port",Wr.get("port"))}))})()})();